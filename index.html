<!doctype html> 
<html lang="es"> 
<head> 
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="assets/kepri-logo.png">
    <title>Kepri Games</title>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>
    <img src="assets/kepri_banner.png" class="centrado"</img>
    <h1>Bienvenido a Kepri Games</h1>
    <div id= "contenedorJuegos" class="juegos">
        <h2 class="separador">Juegos clásicos para navegador</h2>
        <!--Cargador dinámico de recursos para la página-->
        <script>
            populatePage();

            // Crear los enlaces de los juegos
            async function populatePage(){
                const request = new Request('juegos/juegos.json');
                const response = await fetch(request);
                const listaNombres = await response.json();

                // Por cada nombre del JSON, creamos un enlace con su nombre y miniatura correspondiente, 
                // y lo hacemos hijo del contenedor.
                for(let i = 0; i < listaNombres.length; i++){
                    const nombreBonito = listaNombres[i].charAt(0).toUpperCase() + listaNombres[i].substr(1);
 
                    var enlace = document.createElement("a");
                    enlace.innerHTML = 
                    `<a href='juegos/${listaNombres[i]}' class='contenedor link'> 
                        <img src='juegos/${listaNombres[i]}/assets/${listaNombres[i]}-thumb.png' class='contenedor contenido'> 
                        <img src='assets/recuadro.png' class='contenedor recuadro'/> 
                        <h3>${nombreBonito}</h3>
                    </a>`;
                    document.getElementById("contenedorJuegos").appendChild(enlace);
                }
            }
        </script>
    </div>
    <!---- Prueba API Itch.io ---->
    <h2 class="separador">O compra desde nuestra página de Itch.io</h2>
    <button id="buy_button">Buy My Game!</button>
    <script type="text/javascript" src="https://static.itch.io/api.js"></script>
    <script type="text/javascript">
        // Botón de compra
        Itch.attachBuyButton(document.getElementById("buy_button"), {
            //Usuario y juego de itch.io (espacios se sustituyen por guiones)
            user: "kepri-studios",
            game: "bye-bye-banner"
        });
        // Widget
        Itch.getGameData({
            user: "kepri-studios",
            game: "bye-bye-banner",
            onComplete: function(data) {
                //console.log(data)
            }
        })
    </script>
    <iframe frameborder="0" src="https://itch.io/embed/2953658?linkback=true&amp;border_width=0&amp;bg_color=2c6034&amp;fg_color=ffffff&amp;link_color=e9123b&amp;border_color=702f68" width="206" height="165">
        <a href="https://kepri-studios.itch.io/bye-bye-banner">Bye Bye Banner by Kepri Studios</a>
    </iframe>
        <iframe frameborder="0" src="https://itch.io/embed/2953658?linkback=true&amp;border_width=0&amp;bg_color=2c6034&amp;fg_color=ffffff&amp;link_color=e9123b&amp;border_color=702f68" width="206" height="165">
        <a href="https://kepri-studios.itch.io/azulejo-parejo">Azulejo Parejo by Kepri Studios</a>
    </iframe>
    <iframe
        id="inlineFrameExample"
        title="Inline Frame Example"
        width="300"
        height="200"
        src="https://www.openstreetmap.org/export/embed.html?bbox=-6.007820963859558%2C37.3884784746256%2C-6.000922322273255%2C37.39120625041843&amp;layer=mapnik&amp;marker=37.38984659979383%2C-6.004371643066406">
    </iframe>
    <img src="assets/kepri-logo.png" class="animado"/>
    <footer>
        <p>Contacto:<br>
            <a href="mailto:kepri.spain@gmail.com">kepri.spain@gmail.com</a>
        </p>
    </footer>
</body>
</html>